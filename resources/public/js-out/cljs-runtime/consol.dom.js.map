{"version":3,"sources":["consol/dom.cljs"],"mappings":"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","names":["consol.dom/q1","sel","js/document","p__7586","map__7587","cljs.core/--destructure-map","cljs.core.get","consol.dom/ensure-output-slot!","token-id","token-el","or__5142__auto__","slot","temp__5823__auto__","p","temp__5821__auto__","n","consol.dom/clear!","el","consol.dom/example-box-node","box","p__7591","map__7592","consol.dom/terminal-node","text","loading?","pre","consol.dom/media-node","rich-node","wrap","consol.dom/show-loading!","p__7595","map__7596","consol.dom/show-text!","body","p__7597","map__7598","consol.dom/show-rich!","node","consol.render/render-rich","consol.dom/show-error!","err"],"sourcesContent":["(ns consol.dom\n  (:require [consol.render :as render]))\n\n(defn- q1 [sel]\n  (.querySelector js/document sel))\n\n(defn ensure-output-slot!\n  \"Find output slot by token-id.\n  If missing, create one right after the token element.\"\n  [{:keys [token-id]} ^js token-el]\n  (when token-id\n    (or (q1 (str \"[data-slab-slot=\\\"\" token-id \"\\\"]\"))\n        (when token-el\n          (let [slot (.createElement js/document \"div\")]\n            (set! (.-className slot) \"slab-output-slot\")\n            (.setAttribute slot \"data-slab-slot\" token-id)\n            (when-let [p (.-parentNode token-el)]\n              (if-let [n (.-nextSibling token-el)]\n                (.insertBefore p slot n)\n                (.appendChild p slot)))\n            slot)))))\n\n(defn clear! [^js el]\n  (when el\n    (set! (.-innerHTML el) \"\")\n    el))\n\n(defn- example-box-node\n  \"Outer chrome box. Uses your existing .example styling.\"\n  []\n  (let [box (.createElement js/document \"div\")]\n    (set! (.-className box) \"example slab-output\")\n    box))\n\n(defn- terminal-node\n  \"Inner terminal output.\"\n  [{:keys [text loading?]}]\n  (let [pre (.createElement js/document \"pre\")]\n    (set! (.-className pre) \"slab-terminal\")\n    (set! (.-textContent pre)\n          (cond\n            loading? \"\u258c\"\n            :else (or text \"\")))\n    pre))\n\n(defn- media-node\n  \"Inner media container. Map .slab-media to your existing scaled media CSS.\"\n  [rich-node]\n  (let [wrap (.createElement js/document \"div\")]\n    (set! (.-className wrap) \"slab-media\")\n    (.appendChild wrap rich-node)\n    wrap))\n\n(defn show-loading! [slot]\n  (when slot\n    (clear! slot)\n    (let [box (example-box-node)]\n      (.appendChild box (terminal-node {:loading? true}))\n      (.appendChild slot box))\n    slot))\n\n(defn show-text! [slot {:keys [body]}]\n  (when slot\n    (clear! slot)\n    (let [box (example-box-node)]\n      (.appendChild box (terminal-node {:text body}))\n      (.appendChild slot box))\n    slot))\n\n(defn show-rich! [slot {:keys [body]}]\n  (when slot\n    (clear! slot)\n    (let [box  (example-box-node)\n          node (render/render-rich body)]\n      (.appendChild box (media-node node))\n      (.appendChild slot box))\n    slot))\n\n(defn show-error! [slot err]\n  (when slot\n    (clear! slot)\n    (let [box (example-box-node)]\n      (.appendChild box (terminal-node {:text (str err)}))\n      (.appendChild slot box))\n    slot))\n"]}