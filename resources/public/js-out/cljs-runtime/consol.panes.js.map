{"version":3,"sources":["consol/panes.cljs"],"mappings":"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","names":["consol.panes/token-test","cljs.core/re-pattern","consol.panes/token-repl","consol.panes/apply-template","tmpl","state","cljs.core/not","cljs.core/re-find","clojure.string/replace","p__8653","vec__8654","cljs.core.nth","_","k","v","consol.panes/classify-value","t","clojure.string/lower-case","clojure.string/includes?","consol.panes/split-kv","line","vec__8679","seq__8680","cljs.core/seq","first__8681","cljs.core/first","cljs.core/next","more","clojure.string.split","clojure.string/trim","clojure.string.join","temp__5823__auto__","vec__8687","cljs.core/re-matches","var_args","G__8693","consol.panes/mk-el","js/Error","tag","js/document","class-name","e","consol.panes/set-text!","el","s","consol.panes/append!","parent","child","consol.panes/mount-pane!","pre","cljs.core._EQ_","vec__8705","raw","clojure.string/trimr","lines","cljs.core.map","cljs.core.into","pane-type","clojure.string/starts-with?","cljs.core.subs","cljs.core.subvec","non-empty","p1__8701#","cljs.core.filter","kv-pairs","cljs.core/some?","is-kv","cljs.core/count","cljs.core.max","js/Math.floor","kv","consol.panes.mk_el","seq__8713","chunk__8714","count__8715","i__8716","vec__8723","cljs.core/chunked-seq?","c__5673__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__8750","row","kdiv","vdiv","consol.panes/mount-all-panes!","seq__8767","chunk__8768","count__8769","i__8770","cljs.core.array_seq","consol.panes/render-panes!","seq__8830","chunk__8831","count__8832","i__8833","kind","seq__8876","chunk__8877","count__8878","i__8879","seq__8880","chunk__8881","count__8882","i__8883","rendered","klass"],"sourcesContent":["(ns consol.panes\n  (:require [clojure.string :as str]))\n\n(def token-test (re-pattern \"\\\\{\\\\{[a-zA-Z0-9_]+\\\\}\\\\}\"))\n(def token-repl (re-pattern \"\\\\{\\\\{([a-zA-Z0-9_]+)\\\\}\\\\}\"))\n\n(defn apply-template [tmpl state]\n  (let [tmpl (str tmpl)]\n    (if-not (re-find token-test tmpl)\n      tmpl\n      (str/replace tmpl token-repl\n                   (fn [[_ k]]\n                     (let [v (when state (aget state k))]\n                       (if (or (nil? v) (undefined? v)) \"\" (str v))))))))\n\n(defn classify-value [v]\n  (let [t (-> (str v) str/lower-case)]\n    (cond\n      (or (str/includes? t \"error\")\n          (str/includes? t \"failed\")\n          (str/includes? t \"offline\")\n          (str/includes? t \"down\")) \"bad\"\n      (or (str/includes? t \"warn\")\n          (str/includes? t \"charging\")\n          (str/includes? t \"dirty\")\n          (str/includes? t \"throttl\")\n          (str/includes? t \"hot\")) \"warn\"\n      :else \"\")))\n\n(defn split-kv [line]\n  (cond\n    (str/includes? line \"::\")\n    (let [[k & more] (str/split line #\"::\")]\n      [(str/trim k) (str/trim (str/join \"::\" more))])\n\n    :else\n    (when-let [[_ k v] (re-matches #\"^\\s*([^\\s]+)\\s{2,}(.+)$\" line)]\n      [(str/trim k) (str/trim v)])))\n\n;; ------------------------------------------------------------\n;; DOM helpers\n;; ------------------------------------------------------------\n\n(defn- mk-el\n  ([tag] (.createElement js/document tag))\n  ([tag class-name]\n   (let [e (.createElement js/document tag)]\n     (set! (.-className e) class-name)\n     e)))\n\n(defn- set-text! [el s]\n  (set! (.-textContent el) (str s))\n  el)\n\n(defn- append! [parent child]\n  (.appendChild parent child)\n  parent)\n\n;; ------------------------------------------------------------\n;; Pane mount/render\n;; ------------------------------------------------------------\n\n(defn mount-pane! [pre]\n  (when-not (= \"1\" (.getAttribute pre \"data-slab-mounted\"))\n    (.setAttribute pre \"data-slab-mounted\" \"1\")\n\n    (let [raw (-> (.-textContent pre) (str/replace #\"\\r\\n\" \"\\n\") (str/trimr))\n          lines (->> (str/split raw #\"\\n\") (map str/trimr) (into []))\n\n          [pane-type lines] (if (and (seq lines) (str/starts-with? (first lines) \"@\"))\n                              [(-> (subs (first lines) 1) str/trim str/lower-case)\n                               (subvec lines 1)]\n                              [nil lines])\n\n          _ (when pane-type\n              (.. pre -classList (add (str \"pane-\" pane-type))))\n\n          non-empty (->> lines (filter #(seq (str/trim %))) (into []))\n          kv-pairs (->> non-empty (map split-kv) (filter some?) (into []))\n          is-kv (>= (count kv-pairs) (max 1 (js/Math.floor (* 0.7 (count non-empty)))))]\n\n      (if-not is-kv\n        (do\n          (.setAttribute pre \"data-pane-kind\" \"text\")\n          (.setAttribute pre \"data-template\" (str/join \"\\n\" lines)))\n        (do\n          (.setAttribute pre \"data-pane-kind\" \"kv\")\n          (.. pre -classList (add \"pane-kv\"))\n\n          (let [kv (mk-el \"div\")]\n            (set! (.-className kv) \"kv\")\n\n            (doseq [[k v] kv-pairs]\n              (let [row (mk-el \"div\" \"row\")\n                    kdiv (mk-el \"div\" \"k\")\n                    vdiv (mk-el \"div\" \"v\")]\n                (set-text! kdiv k)\n                (.setAttribute vdiv \"data-template\" v)\n                (set-text! vdiv v)\n                (append! row kdiv)\n                (append! row vdiv)\n                (append! kv row)))\n\n            (set! (.-textContent pre) \"\")\n            (append! pre kv)))))))\n\n(defn mount-all-panes! []\n  (doseq [pre (array-seq (.querySelectorAll js/document \"pre.example\"))]\n    (mount-pane! pre)))\n\n(defn render-panes! [state]\n  (doseq [pre (array-seq (.querySelectorAll js/document \"pre.example\"))]\n    (let [kind (.getAttribute pre \"data-pane-kind\")]\n      (cond\n        (= kind \"text\")\n        (let [tmpl (.getAttribute pre \"data-template\")]\n          (set! (.-textContent pre) (apply-template tmpl state)))\n\n        (= kind \"kv\")\n        (doseq [vdiv (array-seq (.querySelectorAll pre \".v\"))]\n          (let [tmpl (.getAttribute vdiv \"data-template\")\n                rendered (apply-template tmpl state)\n                klass (classify-value rendered)]\n            (set! (.-textContent vdiv) rendered)\n            (.. vdiv -classList (remove \"warn\"))\n            (.. vdiv -classList (remove \"bad\"))\n            (when (seq klass)\n              (.. vdiv -classList (add klass)))))))))\n"]}